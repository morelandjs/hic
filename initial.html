

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Initial conditions &mdash; hic 0.1.dev0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="hic 0.1.dev0 documentation" href="index.html"/>
        <link rel="prev" title="Anisotropic flow" href="flow.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> hic</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="flow.html">Anisotropic flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="flow.html#the-flow-vector">The flow vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html#flow-cumulants">Flow cumulants</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html#random-sampling">Random sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Initial conditions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#eccentricity-harmonics">Eccentricity harmonics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-hic.initial">Reference</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">hic</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Initial conditions</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/jbernhard/hic/blob/master/doc/initial.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="initial-conditions">
<h1>Initial conditions<a class="headerlink" href="#initial-conditions" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="docutils literal"><span class="pre">initial</span></tt> module is for initial condition profiles.
These profiles are typically generated by Monte Carlo initial condition models for input to hydrodynamics.</p>
<p>The central class is <tt class="docutils literal"><span class="pre">hic.initial.IC</span></tt>.
It takes an IC energy or entropy density profile and calculates relevant properties.
Let&#8217;s fabricate a smooth profile:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">Y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="o">-</span><span class="mf">8.</span><span class="p">:</span><span class="mf">8.1</span><span class="p">:</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">8.</span><span class="p">:</span><span class="mf">8.1</span><span class="p">:</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c"># reverse direction</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">Z</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-.</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">X</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">Y</span><span class="o">-</span><span class="n">y0</span><span class="p">)))</span>
</pre></div>
</div>
<p>This profile <tt class="docutils literal"><span class="pre">Z</span></tt> consists of a few Gaussian blobs evaluated on a 161x161 grid from -8 to 8 fm in steps of 0.1 fm.
We can visualize it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">Blues</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/ic_profile.png" src="_images/ic_profile.png" />
<p>Now let&#8217;s create an <tt class="docutils literal"><span class="pre">IC</span></tt> class from this profile:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">hic</span> <span class="kn">import</span> <span class="n">initial</span>
<span class="n">ic</span> <span class="o">=</span> <span class="n">initial</span><span class="o">.</span><span class="n">IC</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>  <span class="c"># second arg is grid spacing</span>
</pre></div>
</div>
<p>The center of mass of the profile is (-3/4, 1) within discretization error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cm</span> <span class="o">=</span> <span class="n">ic</span><span class="o">.</span><span class="n">cm</span><span class="p">()</span>
</pre></div>
</div>
<p>The total entropy (or energy) of the profile is the Riemann sum of the grid, i.e. the sum of all grid cells multiplied by the grid cell area:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">total</span> <span class="o">=</span> <span class="n">ic</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="eccentricity-harmonics">
<h2>Eccentricity harmonics<a class="headerlink" href="#eccentricity-harmonics" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">IC</span></tt> class is most useful for calculating eccentricity harmonics <span class="math">\(\varepsilon_n\)</span>, defined by</p>
<div class="math">
\[\varepsilon_n e^{i n\phi} = -\frac{\int dx \, dy\, r^n e^{i n \phi} \, S}{\int dx \, dy \, r^n \, S},\]</div>
<p>where <span class="math">\(S\)</span> is the entropy (or energy) profile and the integrals are taken over the entire profile relative to the center of mass.
Numerically, the integrals are of course implemented as Riemann sums.
Continuing with the above example, the ellipticity <span class="math">\(\varepsilon_2\)</span> is</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">e2</span> <span class="o">=</span> <span class="n">ic</span><span class="o">.</span><span class="n">ecc</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The triangularity is</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">e3</span> <span class="o">=</span> <span class="n">ic</span><span class="o">.</span><span class="n">ecc</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>We can make a list of <span class="math">\((n, \varepsilon_n)\)</span> pairs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[(</span><span class="n">n</span><span class="p">,</span> <span class="n">ic</span><span class="o">.</span><span class="n">ecc</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="section" id="module-hic.initial">
<span id="reference"></span><h2>Reference<a class="headerlink" href="#module-hic.initial" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="hic.initial.IC">
<em class="property">class </em><tt class="descclassname">hic.initial.</tt><tt class="descname">IC</tt><big>(</big><em>profile</em>, <em>dxy</em><big>)</big><a class="headerlink" href="#hic.initial.IC" title="Permalink to this definition">¶</a></dt>
<dd><p>Initial condition entropy or energy density profile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>profile</strong> (<em>array-like</em>) &#8211; The IC profile as a block-style grid.</li>
<li><strong>dxy</strong> (<em>float or pair of floats</em>) &#8211; Size of each grid cell in fm, either a single value <tt class="docutils literal"><span class="pre">dxy</span> <span class="pre">=</span> <span class="pre">dx</span> <span class="pre">=</span> <span class="pre">dy</span></tt>
or a pair <tt class="docutils literal"><span class="pre">dxy</span> <span class="pre">=</span> <span class="pre">(dx,</span> <span class="pre">dy)</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="hic.initial.IC.cm">
<tt class="descname">cm</tt><big>(</big><big>)</big><a class="headerlink" href="#hic.initial.IC.cm" title="Permalink to this definition">¶</a></dt>
<dd><p>Center of mass coordinates, assuming the middle of the profile is
(0, 0).</p>
</dd></dl>

<dl class="method">
<dt id="hic.initial.IC.ecc">
<tt class="descname">ecc</tt><big>(</big><em>n</em><big>)</big><a class="headerlink" href="#hic.initial.IC.ecc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate eccentricity harmonic <span class="math">\(\varepsilon_n\)</span>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n</strong> (<em>int</em>) &#8211; Eccentricity order.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hic.initial.IC.sum">
<tt class="descname">sum</tt><big>(</big><big>)</big><a class="headerlink" href="#hic.initial.IC.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Total entropy or energy.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="flow.html" class="btn btn-neutral" title="Anisotropic flow"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Jonah Bernhard.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>